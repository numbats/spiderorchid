---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# spiderorchid

<!-- badges: start -->
<!-- badges: end -->

# Download and wrangle publication data for Monash EBS academic staff

## Overview

The `spiderorchid` R package offers tools to retrieve research publications from Google Scholar and ORCID, along with CRAN package download statistics. It is tailored for academic researchers in the EBS department who wish to consolidate and analyze their research outputs, while also monitoring their contributions to CRAN, including publication updates and downloads.

The main functions included are:

* `find_cran_packages`: Searches for CRAN packages by an author's first and last name and returns relevant package information such as the number of downloads and last update date.
* `get_publications`: Retrieves publications from both Google Scholar and ORCID based on provided IDs.
* `get_all_publications`: Retrieves publications from multiple authors.
* `cran_all_pubs`: Combines CRAN package data for multiple authors.

## Installation

```r
# Install the package
pak::pak("numbats/spiderorchid")
```

Authenticate for the ORCID API by following the instructions at <https://github.com/ropensci-archive/rorcid/blob/master/README-not.md#authentication>. We have found that the second option (a 2-legged OAuth) is necessary. Then store the token obtained from `orcid_auth()` in your `.Renviron` file by running `usethis::edit_r_environ()`. It should be of the form

```
ORCID_TOKEN=<your token>
```

```{r}
library(spiderorchid)
library(dplyr)
```

## Dataset

`staff_ids.csv`

This dataset contains mappings between researchers' names and their respective ORCID and Google Scholar IDs. It is useful for linking and identifying academic profiles across different platforms.

```{r}
staff_ids
```

## ORCID publications

This function retrieves research publications from ORCID.

```{r}
staff_ids |>
  filter(last_name %in% c("Negi", "Lydeamore")) |>
  pull(orcid_id) |>
  fetch_orcid()
```

## Google scholar publications

```{r}
staff_ids |>
  filter(last_name %in% c("Negi", "Lydeamore")) |>
  pull(scholar_id) |>
  fetch_scholar()
```

## CRAN packages

This function retrieves information about CRAN packages authored by a specified individual. It returns a data frame containing the package name, number of downloads, the authors, and the last update date.

```{r}
fetch_cran(c(
  "Michael Lydeamore",
  "Di Cook",
  "Dianne Cook"
))
```
