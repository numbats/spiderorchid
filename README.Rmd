---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# spiderorchid  <img src="man/figures/spiderorchid-hex.png" align="right" width = 150 />

<!-- badges: start -->
<!-- badges: end -->

**Download and wrangle publication data for Monash EBS academic staff**

## Overview

The `spiderorchid` R package provides tools to retrieve research publications from Google Scholar, ORCID and PURE, or from DOIs, along with CRAN package download statistics. It is tailored for academic researchers in the EBS department who wish to consolidate and analyze their research outputs, while also monitoring their contributions to CRAN.

It also provides journal ranking information from various sources, including the Monash Business School, the Australian Business Deans' Council, CORE, SCImago and ERA2010.

The main functions included are:

* `fetch_scholar`: Retrieves publication details from Google Scholar given IDs.
* `fetch_orcid`: Retrieves publication details from ORCID given IDs.
* `fetch_doi`: Retrieves publication details given DOIS.
* `fetch_pure`: Retrieves publication details from PURE for specific years.
* `fetch_cran`: Searches for CRAN packages by an authorâ€™s name and returns relevant package information such as the number of downloads and last update date.
* `journal_ranking`: Return journal ranking information from the Monash Business School, the Australian Business Deans' Council and other lists.

The package caches results within each R session. So if you fetch the same data multiple times, it will only download it once.

## Installation

```r
# Install the packages needed
pak::pak(c("robjhyndman/pkgmeta", "numbats/spiderorchid"))
```

```{r}
library(spiderorchid)
library(dplyr)
```

## Staff IDs

`staff_ids.csv`

This dataset contains mappings between researchers' names and their respective ORCID and Google Scholar IDs. It is useful for linking and identifying academic profiles across different platforms.

```{r}
staff_ids
```

## Google scholar publications

Given a vector of Google Scholar IDs, the `fetch_scholar()` function retrieves publication details and returns them in the form of a data frame, with one row per publication.

```{r}
staff_ids |>
  filter(last_name %in% c("Negi", "Lydeamore")) |>
  pull(scholar_id) |>
  fetch_scholar()
```

## ORCID publications

Given a vector of ORCID IDs, the `fetch_orcid()` function retrieves publication details and returns them in the form of a data frame, with one row per publication.

```{r}
staff_ids |>
  filter(last_name %in% c("Negi", "Lydeamore")) |>
  pull(orcid_id) |>
  fetch_orcid()
```

The `fetch_orcid()` function requires authentication on ORCID. If you have not previously authenticated, it will prompt you to do so when first run. If you just follow the prompts, you will be authenticated, but only for downloading your own papers. If you want to download papers from other ORCID IDs, you will need to authenticate with a 2-legged OAuth. Follow the instructions at <https://info.orcid.org/register-a-client-application-production-member-api/>. To avoid having to do this in each session, store the token obtained from `orcid_auth()` in your `.Renviron` file by running `usethis::edit_r_environ()`. It should be of the form `ORCID_TOKEN=<your token>`.

## DOI publications

Given a vector of DOIs, the `fetch_doi()` function retrieves publication details and returns them in the form of a data frame, with one row per DOI.

```{r}
c(
  "10.1016/j.ijforecast.2023.10.003",
  "10.1080/10618600.2020.1807353"
) |>
  fetch_doi()
```

## PURE publications

Given a vector of years, the `fetch_pure()` function retrieves publication details from the PURE system for academic staff in the Department of Econometrics & Business Statistics, Monash University.

```{r, eval = FALSE}
fetch_pure(2024)
```

```{r, echo = FALSE}
ebs_pure |> filter(year == 2024)
```

The `fetch_pure()` function requires an API key to access the PURE system. The API key is stored in the environment variable `PURE_API_KEY`. This function is restricted to Monash IP addresses; so either use it on campus or invoke the VPN before using it off campus. It will return publications in the specified years, coauthored by members of the Department of 
Econometrics & Business Statistics, Monash University. 

The function is run periodically, and the data stored as `ebs_pure`. Currently, the stored data includes publications from January 2018 to May 2025.

```{r}
ebs_pure
```

## CRAN packages

This function retrieves information about CRAN packages authored by specified individuals. It returns a data frame containing the package name, number of downloads, the authors, and the last update date.

```{r}
c(
  "Michael Lydeamore",
  "Di Cook",
  "Dianne Cook"
) |>
  fetch_cran()
```

## Journal rankings

This function retrieves journal ranking information for a list of journals. The rankings are from the Monash Business School (default), the Australian Business Deans' Council, the Computing Research and Education Association of Australasia, SCImago or ERA2010. It returns a data frame containing journal names, and their rankings. Fuzzy matching is used, but it works best if you use the correct journal name. Multiple matches can be returned if the journal name is ambiguous. 

```{r}
c(
  "Annals of Statistics",
  "Journal of the American Statistical Association",
  "Journal of Computational and Graphical Statistics",
  "International Journal of Forecasting"
) |>
  journal_ranking()
journal_ranking("Forecasting")
```

There is a [shiny app](https://ebsmonash.shinyapps.io/Journal_Rankings/) that allows you to explore the journal rankings interactively.
